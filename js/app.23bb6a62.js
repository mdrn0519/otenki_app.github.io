(function(e){function t(t){for(var n,c,r=t[0],l=t[1],s=t[2],u=0,d=[];u<r.length;u++)c=r[u],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&d.push(a[c][0]),a[c]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);p&&p(t);while(d.length)d.shift()();return i.push.apply(i,s||[]),o()}function o(){for(var e,t=0;t<i.length;t++){for(var o=i[t],n=!0,r=1;r<o.length;r++){var l=o[r];0!==a[l]&&(n=!1)}n&&(i.splice(t--,1),e=c(c.s=o[0]))}return e}var n={},a={app:0},i=[];function c(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,c),o.l=!0,o.exports}c.m=e,c.c=n,c.d=function(e,t,o){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(c.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(o,n,function(t){return e[t]}.bind(null,n));return o},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var s=0;s<r.length;s++)t(r[s]);var p=l;i.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("cd49")},"1feb":function(e,t,o){"use strict";o("d2ef")},"22bb":function(e,t,o){"use strict";var n=o("da66"),a=o.n(n);o.d(t,"default",(function(){return a.a}))},"2f6f":function(e,t,o){"use strict";var n=o("36f7"),a=o.n(n);o.d(t,"default",(function(){return a.a}))},"36f7":function(e,t,o){e.exports={modal:"Modal_modal_2DJAT",modal__bg:"Modal_modal__bg_124CW",modal__contents:"Modal_modal__contents_2Pl3H",img:"Modal_img_2b74D",geolocation:"Modal_geolocation_1rK5I",weather_state:"Modal_weather_state_1ZvsV",weather_temp:"Modal_weather_temp_Hx23U",closeBtn:"Modal_closeBtn_2_5-_"}},cd49:function(e,t,o){"use strict";o.r(t);var n=o("7a23");const a=Object(n["f"])(" Input "),i=Object(n["f"])(" use current location ");function c(e,t,o,c,r,l){const s=Object(n["k"])("Modal");return Object(n["i"])(),Object(n["d"])("div",{class:e.$style.contentWrapper},[Object(n["g"])("div",{class:e.$style.content},[Object(n["g"])("h1",{class:e.$style.title},"mdrn otenki app",2),Object(n["g"])("form",{class:e.$style.locationFrom,onSubmit:t[3]||(t[3]=Object(n["q"])((...t)=>e.getWeather&&e.getWeather(...t),["prevent"]))},[Object(n["p"])(Object(n["g"])("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.weather.location=t),type:"text",autofocus:"",placeholder:"Ex) tokyo",class:e.$style.locationFrom__input},null,2),[[n["m"],e.weather.location]]),Object(n["g"])("button",{type:"submit",disabled:e.btnState.isDisable||!e.weather.location,class:e.$style.locationFrom__btn},[a,e.isUseSpinner&&!e.btnState.isUseGeolocation?(Object(n["i"])(),Object(n["d"])("div",{key:0,class:e.$style.spinner},[Object(n["g"])("div",{class:e.$style.spinner__circle},null,2),Object(n["g"])("div",{class:[e.$style.spinner__circle,e.$style.center]},null,2),Object(n["g"])("div",{class:[e.$style.spinner__circle,e.$style.right]},null,2)],2)):Object(n["e"])("",!0)],10,["disabled"]),Object(n["g"])("button",{type:"button",class:e.$style.locationFrom__btn,disabled:e.btnState.isDisable,onClick:t[2]||(t[2]=(...t)=>e.useCurrentLocation&&e.useCurrentLocation(...t))},[i,e.isUseSpinner&&e.btnState.isUseGeolocation?(Object(n["i"])(),Object(n["d"])("div",{key:0,class:e.$style.spinner},[Object(n["g"])("div",{class:e.$style.spinner__circle},null,2),Object(n["g"])("div",{class:[e.$style.spinner__circle,e.$style.center]},null,2),Object(n["g"])("div",{class:[e.$style.spinner__circle,e.$style.right]},null,2)],2)):Object(n["e"])("",!0)],10,["disabled"])],34)],2),Object(n["g"])(n["a"],{"enter-from-class":e.$style.fade_opacity,"enter-active-class":e.$style.fade_transition,"leave-active-class":e.$style.fade_transition,"leave-to-class":e.$style.fade_opacity},{default:Object(n["o"])(()=>[Object(n["p"])(Object(n["g"])(s,{geolocation:e.weather.geolocation,location:e.weather.location,img:e.weather.img,weather:e.weather.state,temp:e.weather.temp,onModalClose:e.modalClose,onIsLoaded:e.isLoaded},null,8,["geolocation","location","img","weather","temp","onModalClose","onIsLoaded"]),[[n["n"],e.modalState.isActive]])]),_:1},8,["enter-from-class","enter-active-class","leave-active-class","leave-to-class"])],2)}var r=o("9ab4"),l=o("bc3a"),s=o.n(l);function p(){return new Promise((function(e,t){var o={enableHighAccuracy:!1,timeout:1e4,maximumAge:0},n=function(t){e(t)},a=function(e){t(e)};navigator.geolocation.getCurrentPosition(n,a,o)}))}var u=p;function d(e,t,o,a,i,c){return Object(n["i"])(),Object(n["d"])("div",{class:e.$style.modal},[Object(n["g"])("div",{class:e.$style.modal__bg,onClick:t[1]||(t[1]=(...t)=>e.modalClose&&e.modalClose(...t))},null,2),Object(n["g"])("div",{class:e.$style.modal__contents},[Object(n["g"])("div",{class:e.$style.closeBtn,onClick:t[2]||(t[2]=(...t)=>e.modalClose&&e.modalClose(...t))},"[X]",2),e.geolocation?(Object(n["i"])(),Object(n["d"])("p",{key:0,class:e.$style.geolocation},Object(n["l"])(e.geolocation),3)):Object(n["e"])("",!0),Object(n["g"])("p",null,"In and around "+Object(n["l"])(e.location),1),Object(n["g"])("img",{src:e.img,class:e.$style.img,onLoad:t[3]||(t[3]=(...t)=>e.isLoaded&&e.isLoaded(...t))},null,42,["src"]),Object(n["g"])("p",{class:e.$style.weather_state},Object(n["l"])(e.weather),3),Object(n["g"])("p",{class:e.$style.weather_temp},Object(n["l"])(e.temp)+" ℃",3)],2)],2)}var b=Object(n["h"])({name:"HelloWorld",props:{geolocation:{type:String,require:!1},location:{type:String,require:!0},img:{type:String,require:!0},weather:{type:String,require:!0},temp:{type:String,require:!0}},setup:function(e,t){var o=function(){t.emit("isLoaded")},n=function(){t.emit("modalClose")};return{isLoaded:o,modalClose:n}}}),f=o("2f6f");const _=b.__cssModules={};_["$style"]=f["default"],b.render=d;var g=b,m={apiKey:"0a9f76b40749280f3266017a63c98261"},y=m,h=Object(n["h"])({name:"App",components:{Modal:g},setup:function(){var e=this,t=y.apiKey,o=Object(n["j"])({isDisable:!1,isUseGeolocation:!1}),a=Object(n["j"])({geolocation:"",location:"",state:"",img:"",temp:""}),i=Object(n["j"])({isActive:!1}),c=Object(n["b"])((function(){return o.isDisable&&!i.isActive})),l=function(){return Object(r["a"])(e,void 0,void 0,(function(){var e,t,n;return Object(r["b"])(this,(function(a){switch(a.label){case 0:o.isDisable=!0,o.isUseGeolocation=!0,a.label=1;case 1:if(a.trys.push([1,5,,6]),navigator.geolocation)return[3,2];throw"Geolocation is not supported by your browser";case 2:return[4,u()];case 3:e=a.sent(),p(e.coords.latitude,e.coords.longitude),a.label=4;case 4:return[3,6];case 5:switch(t=a.sent(),n=void 0,t.code){case 1:n="位置情報の取得に失敗しました。(PERMISSION_DENIED)";break;case 2:n="位置情報の取得に失敗しました。(POSITION_UNAVAILABLE)";break;case 3:n="位置情報の取得に失敗しました。(TIMEOUT)";break;default:n=t}return window.alert(n),o.isDisable=!1,[3,6];case 6:return[2]}}))}))},p=function(e,n){var i;if(o.isDisable||(o.isDisable=!0),void 0!==e&&void 0!==n){var c=function(e){return Math.round(1e4*e)/1e4};a.geolocation=c(e)+", "+c(n),i="https://api.openweathermap.org/data/2.5/weather?lat="+e+"&lon="+n+"&appid="+t+"&lang=ja"}else i="https://api.openweathermap.org/data/2.5/weather?q="+a.location+"&appid="+t+"&lang=ja";s.a.get(i).then((function(e){var t=e.data;a.location=t.name,a.state=t.weather[0].main,a.img="https://openweathermap.org/img/wn/"+t.weather[0].icon+"@4x.png",a.temp=""+Math.round(t.main.temp-273.15)})).catch((function(e){var t,o=e.response;switch(o.status){case 404:t="該当の都市を見つけられませんでした。都道府県名をローマ字で入力するか別の場所を入力してください。";break;case 429:t="時間を開けて入力してください。";break;default:t="Error #401. Please confirm to https://openweathermap.org/faq#error401"}window.alert(t)})).finally((function(){o.isDisable=!1}))},d=function(){i.isActive=!0},b=function(){o.isUseGeolocation=!1,i.isActive=!1,a.geolocation="",a.location="",a.img=""};return{btnState:o,weather:a,modalState:i,isUseSpinner:c,useCurrentLocation:l,getWeather:p,isLoaded:d,modalClose:b}}}),O=(o("1feb"),o("22bb"));const j=h.__cssModules={};j["$style"]=O["default"],h.render=c;var v=h;o("f5fa"),o("fce9");Object(n["c"])(v).mount("#app")},d2ef:function(e,t,o){},da66:function(e,t,o){e.exports={contentWrapper:"App_contentWrapper_2IpqK",content:"App_content_pIJBB",title:"App_title_382G7",locationFrom:"App_locationFrom_2o0tL",locationFrom__input:"App_locationFrom__input_HTT1y",locationFrom__btn:"App_locationFrom__btn_h4aYP",spinner:"App_spinner_wdZQ4",spinner__circle:"App_spinner__circle_1RzGl",fade:"App_fade_2Hxu1",center:"App_center_3dI1f",right:"App_right_3MxHp",fade_transition:"App_fade_transition_2tmXM",fade_opacity:"App_fade_opacity_2CEbn"}},f5fa:function(e,t,o){},fce9:function(e,t,o){}});
//# sourceMappingURL=app.23bb6a62.js.map